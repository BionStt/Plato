@model SelectChannelsViewModel

<div class="dropdown" data-provide="select-dropdown">
    <a class="list-group-item list-group-item-action dropdown-toggle dropdown-toggle-no-caret font-weight-bold" href="#" id="channelDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fal fa-chevron-down p-1 float-right"></i>
        @T["Channel"]
    </a>
    <div class="dropdown-arrow dropdown-arrow-right"></div>
    <div class="dropdown-menu dropdown-menu-right" style="width: 400px;" aria-labelledby="channelDropdown">
        <div class="dropdown-header">
            <a href="#" class="text-muted float-right" data-toggle="dropdown">
                <i class="fal fa-times"></i>
            </a>
            @T["Select channels..."]
        </div>
        <div class="my-2 mx-3">
            <input type="search" class="form-control" placeholder="@T["Search..."]" />
        </div>
        <div class="dropdown-header hidden empty">
            @T["No channel found"]
        </div>

        @if (Model.SelectedChannels != null)
        {
            <div class="list-group-flush select-dropdown">
                @foreach (var channel in Model.SelectedChannels)
                {
                    var check = @channel.IsSelected ? "checked" : "";
                    var uniqueId = "channel-" + channel.Value.Id;
                    var css = @channel.IsSelected ? "list-group-item dropdown-item active" : "list-group-item dropdown-item";
                    <input name="@Model.HtmlName" type="radio" value="@channel.Value.Id" id="@uniqueId" @check/>
                    <label data-value="@channel.Value.Name" class="@css" for="@uniqueId">
                        <i class="fal mr-2 check-icon"></i>
                        @if (!String.IsNullOrWhiteSpace(channel.Value.IconCss))
                        {
                        <span class="channel-icon channel-icon-sm mr-2" style="background-color: @channel.Value.BackColor; color: @channel.Value.ForeColor">
                            <i class="@channel.Value.IconCss"></i>
                        </span>
                        }
                        @channel.Value.Name
                    </label>
                }
            </div>
        }
        else
        {
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    @T["No channels available."]
                </li>
            </ul>
        }

    </div>
</div>

@{
    // get selected channels for preview
    var selectedChannels = Model.SelectedChannels?.Where(c => c.IsSelected == true).ToList() ?? new List<Selection<Channel>>();
}
@if (selectedChannels.Count > 0)
{
    <ul data-empty-preview-text="@T["No channels selected."]" class="list-group select-dropdown-preview">
        @foreach (var channel in selectedChannels)
        {
            <li class="list-group-item">
                @if (!String.IsNullOrWhiteSpace(channel.Value.IconCss))
                {
                    <span class="channel-icon channel-icon-sm mr-2" style="background-color: @channel.Value.BackColor; color: @channel.Value.ForeColor">
                        <i class="@channel.Value.IconCss"></i>
                    </span>
                }
                @channel.Value.Name
            </li>
        }
    </ul>
}
else
{
    <ul data-empty-preview-text="@T["No channels selected."]" class="list-group select-dropdown-preview">
        <li class="list-group-item">
            @T["No channels selected."]
        </li>
    </ul>
}


