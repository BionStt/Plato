@model EntityViewModel<Doc, DocComment>
@{
 
    var details = Model.Entity.GetOrCreate<DocDetails>();
    var viewText = Model.Entity.TotalViews == 1
        ? "view"
        : "views";
    var wordsPerMinute = 200;
    var totalWords = Model.Entity.TotalWords;
    var readingTime = totalWords / wordsPerMinute;
    var minuteText = readingTime == 1
        ? "minute"
        : "minutes";
    var readText = T["{0} to read"].Value;
}

<div class="list-row">
    <navigation name="doc-details"
                model="Model.Entity"
                class="list-left list-inline p-0" />
    <div class="list-body reply-body">
        <card>
            <card-title>
                <ul class="list-inline float-left">
                    
                    @if (details?.TotalContributions > 0)
                    {
                        <li class="list-inline-item">
                            <div class="avatar-group">
                                @foreach (var user in details.Contributors)
                                {
                                    var contributionText = user.Contributions.Count == 1
                                        ? "contribution"
                                        : "contributions";
                                    var contributionTitle = $"{user.Contributions.Count} {contributionText}";
                                    <a asp-route-area="Plato.Users" asp-route-controller="Home" asp-route-action="Display" asp-route-opts.id="@user.Id" asp-route-opts.alias="@user.Alias"><avatar data-toggle="tooltip" title="@user.DisplayName - @contributionTitle" class="avatar avatar-sm" url="@user.Avatar.Url" /></a>
                                }
                            </div>
                        </li>
                    }
                    <li class="list-inline-item">
                        @if (readingTime >= 1)
                        {
                            @readText.Replace("{0}", $"{readingTime} {minuteText}")
                            ;
                        }
                        else
                        {
                            @T["Less then 1 minute to read"]
                        }
                    </li>


                    @*@if (details?.LatestUsers != null)
        {
            <li class="list-inline-item">
                <div class="avatar-group">
                    @foreach (var user in details.LatestUsers)
                    {
                        var replies = user.TotalReplies == 1
                            ? "comment"
                            : "comments";
                        <a asp-route-area="Plato.Users" asp-route-controller="Home" asp-route-action="Display" asp-route-opts.id="@user.Id" asp-route-opts.alias="@user.Alias"><avatar data-toggle="tooltip" title="@user.DisplayName - @user.TotalReplies.ToPrettyInt() @T[replies]" class="avatar avatar-sm" url="@user.Avatar.Url"/></a>
                    }
                </div>
            </li>
        }*@

                    @if (Model.Entity.IsPrivate && base.CurrentUser != null)
                    {
                        if (Model.Entity.CreatedUserId == base.CurrentUser.Id)
                        {
                            <li class="list-inline-item">
                                <span class="badge badge-warning" data-toggle="tooltip" title="@T["This doc is private and only visible as you are the doc author"]">@T["Private"]</span>
                            </li>
                        }
                        else
                        {
                            <li class="list-inline-item">
                                <span class="badge badge-warning" data-toggle="tooltip" title="@T["This doc is private and only visible as you have permission to view private docs"]">@T["Private"]</span>
                            </li>
                        }
                    }

                    @if (Model.Entity.IsHidden)
                    {
                        <li class="list-inline-item">
                            <span data-toggle="tooltip" title="@T["This doc is hidden and only visible as you have permission to view hidden docs"]" class="badge badge-primary">@T["Hidden"]</span>
                        </li>
                    }

                    @if (Model.Entity.IsSpam)
                    {
                        <li class="list-inline-item">
                            <span class="badge badge-info" data-toggle="tooltip" title="@T["This doc has been flagged as SPAM and is only visible as you have permission to view docs flagged as SPAM"]">@T["SPAM"]</span>
                        </li>
                    }
                    @if (Model.Entity.IsDeleted)
                    {
                        <li class="list-inline-item">
                            <span class="badge badge-danger" data-toggle="tooltip" title="@T["This doc has been deleted and is only visible as you have permission to view deleted docs"]">@T["Deleted"]</span>
                        </li>
                    }
                </ul>
                

                <navigation name="doc"
                            model="Model.Entity"
                            class="nav navbar p-0 float-right"
                            child-ul-css-class="dropdown-menu dropdown-menu-right anim anim-2x anim-scale-in" 
                            child-ul-inner-css-class="min-w-200 max-h-250 overflow-auto" />
            </card-title>
            <card-body class="card-body-flush">
                <div class="markdown-body p-3" data-provide="markdownBody">
                    @Html.Raw(@Model.Entity.Html)
                </div>
                <navigation name="doc-footer"
                            model="Model.Entity"
                            enable-list="false" />
            </card-body>

        </card>
    </div>
</div>