if(typeof $().modal=="undefined")throw new Error("BootStrap 4.1.1 or above Required");if(typeof window.$.Plato=="undefined")throw new Error("$.Plato Required");$(function(n,t,i){"use strict";var u=function(){var r="lightBox",f=r+"Id",e={esc:!0,selector:"img",template:'<div class="lightbox" tabindex="-1"><div class="lightbox-wrap" data-lightbox-close="true"><div class="lightbox-loader">Loading...<\/div><div class="lightbox-container"><div class="lightbox-content"><\/div><button class="lightbox-close" type="button" title="Close (Esc)" data-lightbox-close="true">Ã—<\/button><\/div><\/div><\/div>'},t=null,u={init:function(n,t,i){if(this._build(n),t)return this[t]!==null&&typeof this[t]!="undefined"?this[t].apply(this,[n,i]):alert(t+" is not a valid method!"),null;this.bind(n)},bind:function(n){n.autoLinkImages("unbind");var t=n.data(r).selector;console.log(t);n.find(t).each(function(){var e=i(this).attr("src"),f,t,r;if(e&&(f=i(this).parent(),t=f.prop("tagName"),t&&t!=="A")){r=i("<a/>",{href:i(this).attr("src"),title:i(this).attr("alt")||"",target:"_blank"});r.on("click",function(t){t.preventDefault();t.stopPropagation();u.open(n,i(this))});i(this).wrap(r)}})},open:function(r,u){var f,e;if(!t)return!1;t.hasClass("lightbox-closed")&&t.removeClass("lightbox-closed");t.hasClass("lightbox-loading")||t.addClass("lightbox-loading");f=t.find(".lightbox-content");f.length>0&&(e=i("<img/>",{src:u.attr("href"),title:u.attr("title")||""}),e.css({maxHeight:i(n).height()}),f.empty().append(e));t.hasClass("lightbox-opened")||t.addClass("lightbox-opened")},close:function(){if(!t)return!1;t.hasClass("lightbox-loading")&&t.removeClass("lightbox-loading");t.hasClass("lightbox-opened")&&t.removeClass("lightbox-opened");t.hasClass("lightbox-closed")||t.addClass("lightbox-closed")},_build:function(f){var o=f.data(r).id,h=f.data(r).template,c="#"+o,e=i(h,{id:o}),s;if(i(c).length===0){s=function(n){(i(n.target).is("[data-lightbox-close]")||i(n.target).is(".lightbox-content"))&&u.close()};e.on("click",s);if(f.data(r).esc)i(n).on("keyup",function(n){n.keyCode===27&&u.close()});i("body").append(e);t=e}}};return{init:function(){for(var n,c,t={},o=null,s=null,h=0;h<arguments.length;++h)if(n=arguments[h],n)switch(n.constructor){case Object:i.extend(t,n);break;case String:o=n;break;case Function:s=n}if(this.length>0)return this.each(function(){if(i(this).data(f))i(this).data(r,i.extend({},i(this).data(r),t));else{var n=r+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(f,n);i(this).data(r,i.extend({},e,t))}u.init(i(this),o,s)});c=i('[data-provide="markdownBody"]');c.each(function(){var n=i(this),h;if(n.length>0)return n.data(f)?n.data(r,i.extend({},n.data(r),t)):(h=r+parseInt(Math.random()*100)+(new Date).getTime(),n.data(f,h),n.data(r,i.extend({},e,t))),u.init(n,o,s)})}}}(),r;i.fn.extend({lightBox:u.init});r=n.$.Plato;r.ready(function(){i('[data-provide="markdownBody"]').lightBox();i().infiniteScroll&&i().infiniteScroll("ready",function(n){n.find('[data-provide="markdownBody"]').lightBox()});i().markdown&&i().markdown("preview",function(n){n.lightBox()})})}(window,document,jQuery));