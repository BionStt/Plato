if(typeof jQuery=="undefined")throw new Error("jQuery 3.3.1 or above Required");if(typeof window.$.Plato=="undefined")throw new Error("$.Plato Required");if(typeof window.$.fn.platoUI=="undefined")throw new Error("$.Plato UI Required");$(function(n,t,i){"use strict";var r=n.$.Plato,u=function(){var n="mentions",u=n+"Id",t={},r={init:function(n,t){if(t){this[t]?this[t].apply(this,[n]):alert(t+" is not a valid method!");return}this.bind(n)},bind:function(r){r.suggester(i.extend(r.data(n)),{keys:[{match:/(^|\s|\()(@([a-z0-9\-_/]*))$/i,search:function(n,t){for(var r=n.val().split(""),f=null,u=-1,e=t.start-1,i=e;i>=0;i--)if(r[i]==="@"){u=i;break}else if(r[i]==="\n"||r[i]===" ")break;if(u>=0)for(f="",i=u;i<=r.length-1;i++){if(r[i]==="\n"||r[i]===" ")break;f+=r[i]}return{startIndex:u,value:f}},bind:function(n,t){var i=t.value;i&&(i.substring(0,1)==="@"&&(i=i.substring(1,i.length)),r.suggester({page:1,pageSize:5,itemSelection:{enable:!0,index:0,css:"active"},valueField:"keywords",config:{method:"GET",url:"api/users/get?page={page}&size={pageSize}&keywords="+encodeURIComponent(i),data:{sort:"LastLoginDate",order:"Desc"}},itemCss:"dropdown-item",itemTemplate:'<a class="{itemCss}" href="{url}"><span class="avatar avatar-sm mr-2"><span style="background-image: url({avatar.url});"><\/span><\/span><span class="d-inline-block text-truncate w-50" title="{displayName}">{displayName}<\/span><span class="float-right d-inline-block text-truncate max-w-100 text-right" title="@{userName}">@{userName}<\/span><\/a>',parseItemTemplate:function(n,t){return n=t.id?n.replace(/\{id}/g,t.id):n.replace(/\{id}/g,"0"),n=t.displayName?n.replace(/\{displayName}/g,t.displayName):n.replace(/\{displayName}/g,"(no username)"),n=t.userName?n.replace(/\{userName}/g,t.userName):n.replace(/\{userName}/g,"(no username)"),t.avatar&&(n=t.avatar.url?n.replace(/\{avatar.url}/g,t.avatar.url):n.replace(/\{avatar.url}/g,"#")),n},onPagerClick:function(n,t,i){i.preventDefault();i.stopPropagation();r.suggester({page:t},"show")},onItemClick:function(n,i,u){u.preventDefault();r.focus().suggester("hide").suggester({insertData:{index:t.startIndex,value:i.userName}},"insert")}},"show"))},unbind:function(){r.suggester("hide")}}]},t)}};return{init:function(){for(var e,h,o={},f=null,s=0;s<arguments.length;++s)if(e=arguments[s],e)switch(e.constructor){case Object:i.extend(o,e);break;case String:f=e}if(this.length>0)return this.each(function(){if(i(this).data(u))i(this).data(n,i.extend({},i(this).data(n),o));else{var e=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(u,e);i(this).data(n,i.extend({},t,o))}r.init(i(this),f)});f&&(r[f]?(h=i("body"),h.data(n,i.extend({},t,o)),r[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}();i.fn.extend({mentions:u.init});r.ready(function(){i('[data-provide="mentions"]').mentions();i(".md-textarea").mentions();i(".md-textarea").keyBinder("bind")})}(window,document,jQuery));