if(typeof jQuery=="undefined")throw new Error("Plato requires jQuery");$.Plato={};$.Plato.Options={debug:!0,BSToolTipEnabled:!0,BSToolTipSelector:"[data-toggle='tooltip']",MagnificSelector:"[data-toggle='dialog']",AvatarUploadSelector:"[data-upload='avatar']"};$.Plato.Logger={info:"Info",warning:"Warning",error:"Error",logInfo:function(n){this.log(this.info,n)},logWarning:function(n){this.log(this.warning,n)},logError:function(n){this.log(this.error,n)},log:function(n,t){$.Plato.Options.debug&&console.log(n+": "+t+(new Date).getTime()*1e4)}};$(function(n,t,i){"use strict";typeof PlatoOptions!="undefined"&&i.extend(!0,i.Plato.Options,window.PlatoOptions);var r={options:i.Plato.Options,logger:i.Plato.Logger};r.logger.logInfo("$.Plato.Options = "+JSON.stringify(r.options,null,"     "));i(t).ready(function(){r.logger.logInfo("$(doc).ready()");i.Plato.UI.init(r)})}(window,document,jQuery));$.Plato.UI={context:null,init:function(n){this.context=n;this.initToolTips();this.initDropDowns();this.initAvatar();this.initMarkDown()},logInfo:function(n){this.context.logger.logInfo(n)},logError:function(n){this.context.logger.logError(n)},initToolTips:function(){this.logInfo("initToolTips()");this.context.options.BSToolTipEnabled&&($(this.context.options.BSToolTipSelector).tooltip(),this.logInfo("Bootstratp tooltipss initialized."))},initDropDowns:function(){this.logInfo("initDropDowns()");$("ul.dropdown-menu [data-toggle='dropdown']").on("click",function(n){n.preventDefault();n.stopPropagation();$("ul.dropdown-menu [data-toggle='dropdown']").parent().removeClass("show");$(this).parent().addClass("show")})},initAvatar:function(){this.logInfo("initAvatar()");$(this.context.options.AvatarUploadSelector).change(function(){function n(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(t){var i=$(n).attr("data-upload-preview-selector");$(i).css("background-image"," url("+t.target.result+")");$(i).hide();$(i).fadeIn(650)};t.readAsDataURL(n.files[0])}}n(this)})},initMarkDown:function(){this.logInfo("initMarkDown()");$(".md-textarea").markdown({autofocus:!1,savable:!1,resize:!0,allowedUploadExtensions:[".gif",".jpg",".jpeg",".png"],baseUrl:"http://localhost:50439/",hiddenButtons:null,onPreview:function(n){var t="",i=n.getContent();return i&&_kb.markdown.post({input:i},function(n){t=n}),t},footer:function(){return""},fullscreen:{enable:!0},minRows:4,maxRows:15})}}(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery"),window):n(jQuery,window)}(function(n){"use strict";var t=function(t,i){n.each(["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"],function(r,u){typeof n(t).data(u)!="undefined"&&(i=typeof i=="object"?i:{},i[u]=n(t).data(u))});this.$ns="i-markdown";this.$element=n(t);this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null};this.$options=n.extend(!0,{},n.fn.markdown.defaults,i,this.$element.data("options"));this.$oldContent=null;this.$isPreview=!1;this.$isFullscreen=!1;this.$editor=null;this.$textarea=null;this.$handler=[];this.$callback=[];this.$nextTab=[];this.showEditor()},r,i,u;t.prototype={constructor:t,__alterButtons:function(t,i){var r=this.$handler,u=t==="all",f=this;n.each(r,function(n,r){var e=!0;e=u?!1:r.indexOf(t)<0;e===!1&&i(f.$editor.find('a[data-handler="'+r+'"]'))})},__buildButtons:function(t,i){for(var l=this.$ns,nt=this.$handler,tt=this.$callback,h,a,v,k,y,d,g,w,e,o,b,c=0;c<t.length;c++)for(a=t[c],h=0;h<a.length;h++){for(k=a[h].data,y=n("<div/>",{"class":a[h].css}),v=0;v<k.length;v++){var r=k[v],it=l+"-"+r.name,rt=this.__getIcon(r),ot=r.btnText?r.btnText:"",ut=r.btnClass?r.btnClass:"btn",st=r.tabIndex?r.tabIndex:"-1",p=typeof r.hotkey!="undefined"?r.hotkey:"",ht=typeof jQuery.hotkeys!="undefined"&&p!==""?" ("+p+")":"",u=typeof r.dropdown!="undefined"?r.dropdown:null,f=n('<button data-toggle="tooltip">');if(f.html(this.__localize(ot)).addClass("btn").addClass("btn-secondary").addClass(ut),ut.match(/btn\-(primary|success|info|warning|danger|link)/)&&f.removeClass("btn-secondary"),f.attr({title:this.__localize(r.title)+ht,tabindex:st,"data-hotkey":p,"data-provider":l,"data-handler":it,"data-tooltip-position":"bottom"}),u&&f.attr("data-toggle","dropdown"),r.toggle===!0&&f.attr("data-toggle","button"),rt&&(u&&(d=n("<i/>"),d.addClass("fa fa-angle-down"),d.prependTo(f)),g=n("<i>"),g.addClass(rt),g.prependTo(f)),u){if(w=n('<div class="dropdown"/>'),e=n('<ul class="dropdown-menu">'),u.css&&e.addClass(u.css),e.css({width:u.width||"250ox"}),u.height&&e.css({"max-height":u.height,"overflow-y":"auto"}),o=null,u.items!=null)for(b=0;b<u.items.length;b++){var s=u.items[b],ft=l+"-"+s.name,ct=s.hotkey||"",lt=s.value||"",et=n('<a href="#">');et.html(s.text).attr({title:s.tooltip?this.__localize(s.tooltip)+ct:"","data-provider":l,"data-handler":ft,"data-hotkey":p,"data-value":lt});o=n('<li class="dropdown-item">');o.append(et);e.append(o);nt.push(ft);tt.push(s.callback)}else o=n("<li>"),o.append(u.html.replace("{baseUrl}",this.$options.baseUrl)),e.append(o);w.append(f);w.append(e);y.append(w)}else y.append(f);nt.push(it);tt.push(r.callback)}i.append(y)}return i},__setListener:function(){var n=typeof this.$textarea.attr("rows")!="undefined",t=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=n?this.$textarea.attr("rows"):t;this.$options.resize&&this.$textarea.css("resize",this.$options.resize);this.$textarea.data("markdown",this)},__setEventListeners:function(){this.$textarea.on({focus:n.proxy(this.focus,this),keyup:n.proxy(this.keyup,this),change:n.proxy(this.change,this),select:n.proxy(this.select,this)});if(this.eventSupported("keydown"))this.$textarea.on("keydown",n.proxy(this.keydown,this));if(this.eventSupported("keypress"))this.$textarea.on("keypress",n.proxy(this.keypress,this))},__handle:function(t){var i=n(t.currentTarget),u=this.$handler,f=this.$callback,r=i.attr("data-handler"),e=u.indexOf(r),o=f[e];n(t.currentTarget).focus();o(this,i);this.change(this);r.indexOf("cmdSave")<0&&this.$textarea.focus();t.preventDefault()},__localize:function(t){var i=n.fn.markdown.messages,r=this.$options.language;return typeof i!="undefined"&&typeof i[r]!="undefined"&&typeof i[r][t]!="undefined"?i[r][t]:t},__getIcon:function(n){if(typeof n=="object"){var t=this.$options.customIcons[n.name];return typeof t=="undefined"?n.icon?n.icon[this.$options.iconlibrary]:null:t}return n},setFullscreen:function(t){var i=this.$editor,u=this.$textarea,r;if(t===!0){i.addClass("md-fullscreen-mode");n("body").addClass("md-nooverflow");this.$options.onFullscreen(this);this.$isPreview===!0&&(r=i.find(".md-preview"),r.find("pre").css({"max-width":i.width()}),r.find("table").css({"max-width":i.width()}))}else{i.removeClass("md-fullscreen-mode");n("body").removeClass("md-nooverflow");this.$options.onFullscreenExit(this);this.$isPreview===!0&&this.hidePreview().showPreview()}this.$isFullscreen=t;u.focus()},showEditor:function(){var l=this,i,nt=this.$ns,r=this.$element,rt=r.css("height"),ut=r.css("width"),o=this.$editable,tt=this.$handler,it=this.$callback,t=this.$options,u=n("<div/>",{"class":"md-editor",click:function(){l.focus()}}),f,e,w,b,k,y,s;if(this.$editor===null){if(f=n("<div/>",{"class":"md-header btn-toolbar"}),e=[],t.buttons.length>0&&(e=e.concat(t.buttons[0])),t.additionalButtons.length>0&&n.each(t.additionalButtons[0],function(i,r){var u=n.grep(e,function(n){return n.name===r.name});u.length>0?u[0].data=u[0].data.concat(r.data):e.push(t.additionalButtons[0][i])}),t.reorderButtonGroups.length>0&&(e=e.filter(function(n){return t.reorderButtonGroups.indexOf(n.name)>-1}).sort(function(n,i){return t.reorderButtonGroups.indexOf(n.name)<t.reorderButtonGroups.indexOf(i.name)?-1:t.reorderButtonGroups.indexOf(n.name)>t.reorderButtonGroups.indexOf(i.name)?1:0})),t.fullscreen.enable){w=this.__localize("Full Screen");f.append('<div class="btn-group btn-group-right"><a class="btn btn-secondary md-control-fullscreen i-tooltip" href="#" data-tooltip-position="bottom" title="'+w+'"><span><i class="'+this.__getIcon(t.fullscreen.icons.fullscreenOn)+'"><\/i><\/span><\/a><\/div>').on("click",".md-control-fullscreen",function(n){n.preventDefault();l.setFullscreen(!0)})}if(t.fullscreen.enable&&t.fullscreen!==!1)f.append('<div class="btn-group btn-group-right md-fullscreen-controls"><a href="#" class="btn btn-secondary i-tooltip md-exit-fullscreen" data-tooltip-position="bottom" title="Exit fullscreen"><span><i class="'+this.__getIcon(t.fullscreen.icons.fullscreenOff)+'"><\/i><\/span><\/a><\/div>').on("click",".md-exit-fullscreen",function(n){n.preventDefault();l.setFullscreen(!1)});e.length>0&&(f=this.__buildButtons([e],f));u.append(f);r.is("textarea")?(r.before(u),i=r,i.addClass("i-input").addClass("md-textarea"),u.append(i)):(b=typeof toMarkdown=="function"?toMarkdown(r.html()):r.html(),k=n.trim(b),i=n("<textarea/>",{"class":"i-input md-textarea",val:k}),u.append(i),o.el=r,o.type=r.prop("tagName").toLowerCase(),o.content=r.html(),n(r[0].attributes).each(function(){o.attrKeys.push(this.nodeName);o.attrValues.push(this.nodeValue)}),r.replaceWith(u));var h=n("<div/>",{"class":"md-footer"}),a=!1,v="";t.savable&&(a=!0,y="cmdSave",tt.push(y),it.push(t.onSave),h.append('<a class="btn btn-success" data-provider="'+nt+'" data-handler="'+y+'"><i class="fa fa-plus"><\/i> '+this.__localize("Save")+"<\/button>"));v=typeof t.footer=="function"?t.footer(this):t.footer;n.trim(v)!==""&&(a=!0,h.append(v));a&&u.append(h);t.width&&t.width!=="inherit"&&(jQuery.isNumeric(t.width)?(u.css("display","table"),i.css("width",t.width+"px")):u.addClass(t.width));t.height&&t.height!=="inherit"&&(n.isNumeric(t.height)?(s=t.height,f&&(s=Math.max(0,s-f.outerHeight())),h&&(s=Math.max(0,s-h.outerHeight())),i.css("height",s+"px")):u.addClass(t.height));this.$editor=u;this.$textarea=i;this.$editable=o;this.$oldContent=this.getContent();this.__setListener();this.__setEventListeners();this.$editor.attr("id",(new Date).getTime());this.$editor.on("click",'[data-provider="i-markdown"]',n.proxy(this.__handle,this));(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all"));this.eventSupported("keydown")&&typeof jQuery.hotkeys=="object"&&f.find('[data-provider="i-markdown"]').each(function(){var t=n(this),r=t.attr("data-hotkey");r.toLowerCase()!==""&&i.bind("keydown",r,function(){return t.trigger("click"),!1})});t.initialstate==="preview"?this.showPreview():t.initialstate==="fullscreen"&&t.fullscreen.enable&&this.setFullscreen(!0);var p=t.maxRows,c=t.minRows,d=this.$textarea.height();console.log(d);this.$textarea.on("keyup keypress paste",function(){n("body").first().attr("data-page-is-dirty")||n("body").first().attr("data-page-is-dirty",!0);g(n(this))});this.$textarea.on("focus",function(){g(n(this))});function g(n){var i=26,r=Math.ceil(d/i),t=r||c;n.val()!==""&&(t=n.val().split("\n").length);t=Math.max(t||c);t>p&&(t=p);t<c&&(t=c);t<r&&(t=r);t>=p?n.css({overflow:"auto",height:i*t+"px"}):n.css({overflow:"hidden",height:i*t+"px"})}}else this.$editor.show();t.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active"));this.hideButtons(t.hiddenButtons);this.disableButtons(t.disabledButtons);t.dropZoneOptions&&(this.$editor.dropzone?(t.dropZoneOptions.init||(t.dropZoneOptions.init=function(){var n=0,r=t.allowedUploadExtensions;this.on("addedfile",function(t){var f,e,o,s,u,h;if(n=i.prop("selectionStart"),f=t.upload.filename,e=!1,f&&r)for(o=f.split("."),s=o[o.length-1],u=0;u<r.length;u++)h=r[u].ext,s===h&&(e=!0);return e===!1?(alert("File type is not allowed"),this.removeFile(t),!1):!0});this.on("drop",function(){n=i.prop("selectionStart")});this.on("success",function(t,r){var u,f,e;if(r)for(u=0;u<r.length;u++)f=r[u],e=i.val(),i.val(e.substring(0,n)+"\n!["+f.name+"]("+f.url+")\n"+e.substring(n))});this.on("error",function(n,t){console.log("Error:",t)})}),this.$editor.addClass("dropzone"),this.$editor.dropzone(t.dropZoneOptions)):console.log("dropZoneOptions was configured, but DropZone was not detected."));this.$editor.on("paste",function(n){var i=(n.clipboardData||n.originalEvent.clipboardData).items,r,t;for(r in i)t=i[r],t.kind==="file"&&this.dropzone.addFile(t.getAsFile())});if(t.enableDropDataUri===!0)this.$editor.on("drop",function(t){var r=i.prop("selectionStart");t.stopPropagation();t.preventDefault();n.each(t.originalEvent.dataTransfer.files,function(n,t){var u=new FileReader;u.onload=function(n){var t=n.type.split("/")[0];return function(u){var f=i.val();t==="image"?i.val(f.substring(0,r)+'\n<img src="'+u.target.result+'" />\n'+f.substring(r)):i.val(f.substring(0,r)+'\n<a href="'+u.target.result+'">Download '+n.name+"<\/a>\n"+f.substring(r))}}(t);u.readAsDataURL(t)})});t.onShow(this);return this},parseContent:function(n){return n=n||this.$textarea.val(),this.$options.parser?this.$options.parser(n):typeof markdown=="object"?markdown.toHTML(n):typeof marked=="function"?marked(n):n},showPreview:function(){var o=this.$options,i=this.$textarea,f=i.width(),r=i.next(),t=n("<div/>",{"class":"md-preview i-user-content","data-provider":"markdown-preview"}),e,u;return this.$isPreview===!0?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview").enableButtons("cmdWrite"),this.$editor.find(".md-btn-write").removeClass("selected"),this.$editor.find(".md-btn-preview").addClass("selected"),this.$editor.find(".dz-message").hide(),u=o.onPreview(this,t),e=typeof u=="string"?u:this.parseContent(),t.html(e),t.find("pre").css({"max-width":f}),t.find("table").css({"max-width":f}),r&&r.attr("class")=="md-footer"?t.insertBefore(r):i.parent().append(t),t.css({"min-height":i.outerHeight()+"px",height:"auto"}),this.$options.resize&&t.css("resize",this.$options.resize),i.hide(),t.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){this.$editor.find(".md-btn-write").addClass("selected");this.$editor.find(".md-btn-preview").removeClass("selected");this.$isPreview=!1;var n=this.$editor.find('div[data-provider="markdown-preview"]');n.remove();this.enableButtons("all");this.disableButtons(this.$options.disabledButtons);this.$editor.find(".dz-message").show();this.$options.onPreviewEnd(this);return this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(n){return this.$textarea.val(n),this},findSelection:function(n){var u=this.getContent(),t,i,r;return(t=u.indexOf(n),t>=0&&n.length>0)?(i=this.getSelection(),this.setSelection(t,t+n.length),r=this.getSelection(),this.setSelection(i.start,i.end),r):null},getSelection:function(){var n=this.$textarea[0];return("selectionStart"in n&&function(){var t=n.selectionEnd-n.selectionStart;return{start:n.selectionStart,end:n.selectionEnd,length:t,text:n.value.substr(n.selectionStart,t)}}||function(){return null})()},setSelection:function(n,t){var i=this.$textarea[0];return("selectionStart"in i&&function(){i.selectionStart=n;i.selectionEnd=t;return}||function(){return null})()},replaceSelection:function(n){var t=this.$textarea[0];return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+n+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}||function(){return t.value+=n,jQuery(t)})()},getNextTab:function(){if(this.$nextTab.length===0)return null;var t,n=this.$nextTab.shift();return typeof n=="function"?t=n():typeof n=="object"&&n.length>0&&(t=n),t},setNextTab:function(n,t){var r,i;typeof n=="string"?(r=this,this.$nextTab.push(function(){return r.findSelection(n)})):typeof n=="number"&&typeof t=="number"&&(i=this.getSelection(),this.setSelection(n,t),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end));return},__parseButtonNameParam:function(n){return typeof n=="string"?n.split(" "):n},enableButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.removeClass("disabled")})}),this},disableButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.addClass("disabled")})}),this},hideButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.addClass("hidden")})}),this},showButtons:function(t){var i=this.__parseButtonNameParam(t),r=this;return n.each(i,function(n){r.__alterButtons(i[n],function(n){n.removeClass("hidden")})}),this},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},keyup:function(t){var i=!1,u,c,f,r,s,h;switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:(u=this.getNextTab(),u!==null)?(c=this,setTimeout(function(){c.setSelection(u.start,u.end)},500),i=!0):(f=this.getSelection(),f.start==f.end&&f.end==this.getContent().length?i=!1:(this.setSelection(this.getContent().length,this.getContent().length),i=!0));break;case 13:i=!1;var l=this.getContent().split(""),e=this.getSelection().start,o=-1;for(r=e-2;r>=0;r--)if(l[r]==="\n"){o=r;break}s=l[o+1];s==="-"?this.addBullet(e):n.isNumeric(s)&&(h=this.getBulletNumber(o+1),h&&this.addNumberedBullet(e,h));break;case 27:this.$isFullscreen&&this.setFullscreen(!1);i=!1;break;default:i=!1}i&&(t.stopPropagation(),t.preventDefault());this.$options.onChange(this)},insertContent:function(n,t){var i=this.getContent().slice(0,n),r=this.getContent().slice(n+1);this.setContent(i.concat(t).concat(r))},addBullet:function(n){this.insertContent(n,"- \n");this.setSelection(n+2,n+2)},addNumberedBullet:function(n,t){var r=t+1+". \n",i;this.insertContent(n,r);i=t.toString().length+2;this.setSelection(n+i,n+i)},getBulletNumber:function(t){var i=this.getContent().slice(t).split(".")[0];return n.isNumeric(i)?parseInt(i):null},change:function(){this.$options.onChange(this);return this},select:function(){this.$options.onSelect(this);return this},focus:function(){var t=this.$options,r=t.hideable,i=this.$editor;i.addClass("active");n(document).find(".md-editor").each(function(){if(n(this).attr("id")!==i.attr("id")){var t;(t=n(this).find("textarea").data("markdown"),t===null)&&(t=n(this).find('div[data-provider="markdown-preview"]').data("markdown"));t&&t.blur()}});t.onFocus(this);return this},blur:function(){var u=this.$options,f=u.hideable,i=this.$editor,t=this.$editable;if(i.hasClass("active")||this.$element.parent().length===0){if(i.removeClass("active"),f)if(t.el!==null){var r=n("<"+t.type+"/>"),e=this.getContent(),o=this.parseContent(e);n(t.attrKeys).each(function(n){r.attr(t.attrKeys[n],t.attrValues[n])});r.html(o);i.replaceWith(r)}else i.hide();u.onBlur(this)}return this}};r=n.fn.markdown;n.fn.markdown=function(i){return this.each(function(){var r=n(this),u=r.data("markdown"),f=typeof i=="object"&&i;u||r.data("markdown",u=new t(this,f))})};n.fn.markdown.messages={};n.fn.markdown.handlers={insertContent:function(n,t){n.$textarea.focus();var i="",u=n.getSelection(),r=u.start+t.length;n.replaceSelection(t+i);n.setSelection(r,r+i.length)},insertContentLink:function(n,t){n.$textarea.focus();var i="",f=n.getSelection(),e=n.getContent(),r=t.attr("data-value")||"#",u=f.start+r.length;n.replaceSelection(r+i);n.setSelection(u,u+i.length)},insertQuote:function(t,i){var u,o,r=t.getSelection(),s=t.getContent(),f=i.attr("data-value")||"> ",e;r.length===0?(u=t.__localize("quote here"),t.replaceSelection(f+u),o=r.start+f.length):r.text.indexOf("\n")<0?(u=r.text,t.replaceSelection(f+u),o=r.start+f.length):(e=[],e=r.text.split("\n"),u=e[0],n.each(e,function(n,t){e[n]=f+t}),t.replaceSelection(e.join("\n")),o=r.start+f.length);t.setSelection(o,o+u.length);i.data("dropdownCaller")&&i.data("dropdownCaller").idropdown("hide")},insertHeader:function(n,t){var f,e,i=n.getSelection(),o=n.getContent(),r,s,u=t.attr("data-value")||"#";f=i.length===0?n.__localize("heading text"):i.text;(r=u.length+1,o.substr(i.start-r,r)===u+" ")||(r=u.length,o.substr(i.start-r,r)===u)?(n.setSelection(i.start-r,i.end),n.replaceSelection(f),e=i.start-r):i.start>0&&(s=o.substr(i.start-1,1),!!s&&s!=="\n")?(n.replaceSelection(u+" "+f),e=i.start+u.length+1):(n.replaceSelection(u+" "+f),e=i.start+u.length+1);n.setSelection(e,e+f.length);t.data("dropdownCaller")&&t.data("dropdownCaller").idropdown("hide")}};n.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"fa",language:"en",initialstate:"editor",parser:null,dropZoneOptions:null,enableDropDataUri:!1,baseUrl:"",buttons:[[{name:"groupUtil",css:"btn-group md-tabs",data:[{name:"cmdWrite",hotkey:"Ctrl+P",title:"Write",btnText:"Write",btnClass:"btn btn-secondary md-btn-write selected",callback:function(n){var t=n.$isPreview;t===!0&&n.hidePreview()}},{name:"cmdPreview",hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-secondary md-btn-preview",callback:function(n){var t=n.$isPreview;t===!1&&n.showPreview()}}]},{name:"groupFont",css:"btn-group",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold",octicons:"octicon octicon-bold"},callback:function(n){var i,r,t=n.getSelection(),u=n.getContent();i=t.length===0?n.__localize("strong text"):t.text;u.substr(t.start-2,2)==="**"&&u.substr(t.end,2)==="**"?(n.setSelection(t.start-2,t.end+2),n.replaceSelection(i),r=t.start-2):(n.replaceSelection("**"+i+"**"),r=t.start+2);n.setSelection(r,r+i.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic",octicons:"octicon octicon-italic"},callback:function(n){var i,r,t=n.getSelection(),u=n.getContent();i=t.length===0?n.__localize("emphasized text"):t.text;u.substr(t.start-1,1)==="_"&&u.substr(t.end,1)==="_"?(n.setSelection(t.start-1,t.end+1),n.replaceSelection(i),r=t.start-1):(n.replaceSelection("_"+i+"_"),r=t.start+1);n.setSelection(r,r+i.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",dropdown:{title:"Heading",width:"200px",css:"md-header-dropdown",items:[{name:"cmdHeading1",hotkey:"",text:"<h1>Header 1<\/h1>",value:"#",callback:function(t,i){n.fn.markdown.handlers.insertHeader(t,i)}},{name:"cmdHeading2",text:"<h2>Header 2<\/h2>",value:"##",callback:function(t,i){n.fn.markdown.handlers.insertHeader(t,i)}},{name:"cmdHeading3",text:"<h3>Header 3<\/h3>",value:"###",callback:function(t,i){n.fn.markdown.handlers.insertHeader(t,i)}},{name:"cmdHeading4",text:"<h4>Header 4<\/h4>",value:"####",callback:function(t,i){n.fn.markdown.handlers.insertHeader(t,i)}},{name:"cmdHeading5",text:"<h5>Header 5<\/h5>",value:"#####",callback:function(t,i){n.fn.markdown.handlers.insertHeader(t,i)}},{name:"cmdHeading6",text:"<h6>Header 6<\/h6>",value:"######",callback:function(t,i){n.fn.markdown.handlers.insertHeader(t,i)}}]},icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font",octicons:"octicon octicon-text-size"},callback:function(n,t){t.idropdown({onShow:function(){}},"show")}}]},{name:"groupLists",css:"btn-group",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul",octicons:"octicon octicon-list-unordered"},callback:function(t){var r,f,i=t.getSelection(),e=t.getContent(),u;i.length===0?(r=t.__localize("list text here"),t.replaceSelection("- "+r),f=i.start+2):i.text.indexOf("\n")<0?(r=i.text,t.replaceSelection("- "+r),f=i.start+2):(u=[],u=i.text.split("\n"),r=u[0],n.each(u,function(n,t){u[n]="- "+t}),t.replaceSelection("\n\n"+u.join("\n")),f=i.start+4);t.setSelection(f,f+r.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol",octicons:"octicon octicon-list-ordered"},callback:function(t){var r,f,i=t.getSelection(),o=t.getContent(),e,u;i.length===0?(r=t.__localize("list text here"),t.replaceSelection("1. "+r),f=i.start+3):i.text.indexOf("\n")<0?(r=i.text,t.replaceSelection("1. "+r),f=i.start+3):(e=1,u=[],u=i.text.split("\n"),r=u[0],n.each(u,function(n,t){u[n]=e+". "+t;e++}),t.replaceSelection("\n\n"+u.join("\n")),f=i.start+5);t.setSelection(f,f+r.length)}}]},{name:"groupBlocks",css:"btn-group",data:[{name:"cmdBlockquote",title:"Blockquote",hotkey:"Ctrl+Q",dropdown:{title:"Blockquote",width:"200px",css:"dropdown md-blockquote-dropdown",items:[{name:"cmdBlockquotePrimary",hotkey:"",text:'<blockquote class="i-blockquote i-blockquote-primary"><p>Primary<\/p><\/blockquote>',value:"> {primary} ",callback:function(t,i){n.fn.markdown.handlers.insertQuote(t,i)}},{name:"cmdBlockquoteDefault",text:'<blockquote class="i-blockquote i-blockquote-default"><p>Default<\/p><\/blockquote>',value:"> {default} ",callback:function(t,i){n.fn.markdown.handlers.insertQuote(t,i)}},{name:"cmdBlockquoteSuccess",text:'<blockquote class="i-blockquote i-blockquote-success"><p>Success<\/p><\/blockquote>',value:"> {success} ",callback:function(t,i){n.fn.markdown.handlers.insertQuote(t,i)}},{name:"cmdBlockquoteInfo",text:'<blockquote class="i-blockquote i-blockquote-info"><p>Info<\/p><\/blockquote>',value:"> {info} ",callback:function(t,i){n.fn.markdown.handlers.insertQuote(t,i)}},{name:"cmdBlockquoteWarning",text:'<blockquote class="i-blockquote i-blockquote-warning"><p>Warning<\/p><\/blockquote>',value:"> {warning} ",callback:function(t,i){n.fn.markdown.handlers.insertQuote(t,i)}},{name:"cmdBlockquoteDanger",text:'<blockquote class="i-blockquote i-blockquote-danger"><p>Danger<\/p><\/blockquote>',value:"> {danger} ",callback:function(t,i){n.fn.markdown.handlers.insertQuote(t,i)}}]},icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left",octicons:"octicon octicon-quote"},callback:function(n,t){t.idropdown({onShow:function(){}},"show")}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-console",fa:"fa fa-code","fa-3":"icon-code",octicons:"octicon octicon-code"},callback:function(n){var i,r,t=n.getSelection(),u=n.getContent();i=t.length===0?n.__localize("code text here"):t.text;u.substr(t.start-4,4)==="```\n"&&u.substr(t.end,4)==="\n```"?(n.setSelection(t.start-4,t.end+4),n.replaceSelection(i),r=t.start-4):u.substr(t.start-1,1)==="`"&&u.substr(t.end,1)==="`"?(n.setSelection(t.start-1,t.end+1),n.replaceSelection(i),r=t.start-1):u.indexOf("\n")>-1?(n.replaceSelection("```\n"+i+"\n```"),r=t.start+4):(n.replaceSelection("`"+i+"`"),r=t.start+1);n.setSelection(r,r+i.length)}}]},{name:"groupInsert",css:"btn-group",data:[{name:"cmdLink",title:"Link To URL",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link",octicons:"octicon octicon-link"},callback:function(t){var r,u,f=t.getSelection(),o=t.getContent(),i=null,e;r=f.length===0?t.__localize("enter link description here"):f.text;i=prompt(t.__localize("Insert Hyperlink"),"http://");i!==null&&i!==""&&i!=="http://"&&i!=="https://"&&(e=n("<div>"+i+"<\/div>").text(),t.replaceSelection("["+r+"]("+e+")"),u=f.start+1,t.setSelection(u,u+r.length))}},{name:"cmdImage",title:"Link To Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture",octicons:"octicon octicon-file-media"},callback:function(t){var r,u,f=t.getSelection(),s=t.getContent(),i,e,o;r=f.length===0?t.__localize("enter image description here"):f.text;i=prompt(t.__localize("Insert Image Hyperlink"),"http://");e=new RegExp("^((http|https)://|(//))[a-z0-9]","i");i!==null&&i!==""&&i!=="http://"&&e.test(i)&&(o=n("<div>"+i+"<\/div>").text(),t.replaceSelection("!["+r+"]("+o+' "'+t.__localize("enter image title here")+'")'),u=f.start+2,t.setNextTab(t.__localize("enter image title here")),t.setSelection(u,u+r.length))}},{name:"cmdVideo",title:"Embed Video",hotkey:"Ctrl+Y",dropdown:{title:"Embed Video",width:"500px",css:"dropdown",items:null,html:'<table class="i-table"><tr><td><div class="i-row"><input type="text" style="width: 100%;" class="i-input i-text-box"/><\/div><div class="i-row i-margin-top"><a href="#" class="btn btn-full btn-2x btn-primary"><span><\/span><\/a><\/div><\/td><\/tr><\/table>'},icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-youtube","fa-3":"icon-search",octicons:"octicon octicon-search"},callback:function(n,t){var i=n.__localize("Enter a YouTube or Vimeo URL..."),r=n.__localize("Add Video");t.idropdown({onShow:function(t,u){var f=u.find(".i-input"),e=u.find(".btn");f.attr("placeholder",i);e.find("span").text(r);e.unbind("click").bind("click",function(r){var e,u,o;r.preventDefault();u=n.getSelection();f.val()!==""&&(i=f.val());e=u.length===0?i:u.text;n.replaceSelection("[video]"+e+"[/video]");n.$textarea.focus();o=u.start+e.length+15;n.setSelection(o,o);f.val("");t.idropdown("hide")})}},"show")}}]},{name:"groupEmbed",css:"btn-group btn-group-right",data:[{name:"cmdLinkContent",title:"Link To Article",hotkey:"Ctrl+L",dropdown:{title:"Link To Article",width:"600px",css:"dropdown",items:null,html:'<table class="i-table"><tr><td><div class="i-input-group i-dropdown"><input type="text" style="width: 100%;" class="i-input i-text-box" data-autocomplete-url="{baseUrl}api/search?page_index={pageIndex}&page_size={pageSize}" data-autocomplete-page-size="10" data-dropdown-arrow="false"/><ul class="i-dropdown-menu"><li style="height: 100%;"><div class="i-loader-jumbo"><div class="i-loader i-loader-inverted i-loader-2x"><\/div><\/div><\/li><\/ul><\/div><\/td><\/tr><\/table>'},icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-hashtag","fa-3":"icon-search",octicons:"octicon octicon-search"},callback:function(t,i){var r=t.__localize("Search for articles to link to...");i.idropdown({onShow:function(u,f){var e=f.find(".i-input");e.attr("placeholder",r);e.searchSuggest({config:{method:"POST",data:{enable_role_check:!0,global_scope:1,access_type:1}},onKeyDown:function(n,t){t.keyCode===13&&t.preventDefault()},onItemClick:function(r,f,e){e.preventDefault();i.attr("data-value","#"+f.id+" ");n.fn.markdown.handlers.insertContentLink(t,i);u.idropdown("hide")}})}},"show")}},{name:"cmdCannedReply",title:"Canned Replies",hotkey:"Ctrl+L",dropdown:{title:"Canned Replies",width:"250px",height:"350px",css:"i-dropdown-menu-right",items:null,html:'<div class="i-loader-jumbo"><div class="i-loader i-loader-2x i-loader-inverted"><\/div><\/div>'},icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-edit","fa-3":"icon-search",octicons:"octicon octicon-search"},callback:function(t,i){var r=t.$textarea.data("standardReplyUrl");r?i.idropdown({ajaxUrl:r,onLoad:function(i,r){r.find(".i-dropdown-link").click(function(r){var f=n(this).data("replyId")||0,u;f>0&&(r.preventDefault(),u=n('div[data-reply-markdown-id="'+f+'"]'),u.length>0&&(n.fn.markdown.handlers.insertContent(t,u.html()),i.idropdown("hide")))})}},"show"):alert("No data-standard-reply-url has been defined on the editor.$textarea")}}]}]],customIcons:{},additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",minRows:4,maxRows:12,fullscreen:{enable:!0,icons:{fullscreenOn:{name:"fullscreenOn",icon:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full",octicons:"octicon octicon-link-external"}},fullscreenOff:{name:"fullscreenOff",icon:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small",octicons:"octicon octicon-browser"}}}},onShow:function(){},onPreview:function(){},onPreviewEnd:function(){},onSave:function(){},onBlur:function(){},onFocus:function(){},onChange:function(){},onFullscreen:function(){},onFullscreenExit:function(){},onSelect:function(){}};n.fn.markdown.Constructor=t;n.fn.markdown.noConflict=function(){return n.fn.markdown=r,this};i=function(n){var t=n;if(t.data("markdown")){t.data("markdown").showEditor();return}t.markdown()};u=function(){var t=n(document.activeElement);n(document).find(".md-editor").each(function(){var i=n(this),u=t.closest(".md-editor")[0]===this,r=i.find("textarea").data("markdown")||i.find('div[data-provider="markdown-preview"]').data("markdown");r&&!u&&r.blur()})};n(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(t){i(n(this));t.preventDefault()}).on("click focusin",function(n){u(n)}).ready(function(){n('textarea[data-provide="markdown"]').each(function(){i(n(this))})})}));