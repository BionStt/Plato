if(typeof jQuery=="undefined")throw new Error("Plato requires jQuery");$(function(n,t,i){"use strict";n.$.Plato={};n.$.Plato.Options={debug:!0,url:"",apiKey:"",csrfHeaderName:"X-Csrf-Token",csrfCookieName:"",BSToolTipEnabled:!0,BSToolTipAlternativeSelector:"[data-provide='tooltip']",BSToolTipSelector:"[data-toggle='tooltip']",MagnificSelector:"[data-toggle='dialog']",AvatarUploadSelector:"[data-upload='avatar']",getCsrfCookieToken:function(){if(this.csrfCookieName!==""){var i=n.$.Plato.Storage,t=i.getCookie(this.csrfCookieName);if(t)return t}return""}};n.$.Plato.Logger={info:"Info",warning:"Warning",error:"Error",prevLogDate:null,logInfo:function(n){this.log(this.info,n)},logWarning:function(n){this.log(this.warning,n)},logError:function(n){this.log(this.error,n)},log:function(n,t){if(i.Plato.Options.debug){var r=this.getDifferenceInMilliseconds();this.prevLogDate=new Date;console.log(n+": "+t+" - "+r+"ms elapsed since previous log entry.")}},getDifferenceInMilliseconds:function(){if(this.prevLogDate===null)this.prevLogDate=new Date;else return(this.prevLogDate-new Date)/1e4;return 0}};n.$.Plato.Context={options:function(){return typeof PlatoOptions!="undefined"&&i.extend(!0,i.Plato.Options,window.PlatoOptions),i.Plato.Options},logger:i.Plato.Logger};n.$.Plato.Locale={lang:"en-US"};n.$.Plato.UI={context:n.$.Plato.Context,init:function(){this.initToolTips();this.initDropDowns();this.initAvatar()},logInfo:function(n){this.context.logger.logInfo(n)},logError:function(n){this.context.logger.logError(n)},initToolTips:function(){this.logInfo("initToolTips()");this.context.options().BSToolTipEnabled&&(i(this.context.options().BSToolTipSelector).tooltip({trigger:"hover"}),i(this.context.options().BSToolTipAlternativeSelector).tooltip({trigger:"hover"}),this.logInfo("Bootstratp tooltipss initialized."))},initDropDowns:function(){this.logInfo("initDropDowns()");i("ul.dropdown-menu [data-toggle='dropdown']").on("click",function(n){n.preventDefault();n.stopPropagation();i("ul.dropdown-menu [data-toggle='dropdown']").parent().removeClass("show");i(this).parent().addClass("show")})},initAvatar:function(){this.logInfo("initAvatar()");i(this.context.options().AvatarUploadSelector).change(function(){function n(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(t){var u=i(n).attr("data-upload-preview-selector"),r=i(u).find("span");r.css("background-image"," url("+t.target.result+")");r.hide().fadeIn(650)};t.readAsDataURL(n.files[0])}}n(this)})}};n.$.Plato.Http=function(t){var r=n.$.Plato.Context,f,u,e,o,s;if(!r)throw new Error("Plato.Http requires a valid Plato.Context object");if(f=r.options(),!f)throw new Error("Plato.Http requires a valid Plato.Options object");return u=f.url,e=t.url,u.substring(u.length-1,u.length)==="/"&&(u=u.substring(f.url.length-1)),e.substring(0,1)!=="/"&&(e="/"+e),t.url=u+e,o=f.apiKey,o?(r.logger.logInfo("ApiKey: "+o),t.beforeSend=function(n){n.setRequestHeader("Authorization","Basic "+o)}):r.logger.logInfo("No api key was supplied"),t.headers={"Content-Type":"application/json","X-Api-Version":"1","X-Csrf-Token":f.getCsrfCookieToken()},s=function(){var n=function(n,t,i,u){r&&r.logger.logInfo("$.Plato.Http - Error: "+JSON.stringify(t,null,"     ")+u)},t=function(n){r&&r.logger.logInfo("$.Plato.Http - Completed: "+JSON.stringify(n,null,"     "))};return{onError:function(n){n=n},onAlways:function(n){n=n},promise:function(r){return i.ajax(r).fail(function(t,i,u){n&&n(r,t,i,u)}).always(function(n,i){t&&t(n,i)})}}}(),r.logger.logInfo("$.Plato.Http - Starting Request: "+JSON.stringify(t,null,"     ")),s.promise(t)};n.$.Plato.Storage={setCookie:function(n,t,i,r,u){var e,f;return r=r||!1,r&&(t=encodeURIComponent(JSON.stringify(t))),u||(u="/"),e="",i&&(f=new Date,f.setTime(f.getTime()+864e5*i),e="; expires="+f.toGMTString()),document.cookie=n+"="+t+e+";path="+u,this},getCookie:function(n){var r=n+"=",u=document.cookie.indexOf(r),i,t;return u!==-1?(i=u+r.length,t=document.cookie.indexOf(";",i),t===-1&&(t=document.cookie.length),unescape(document.cookie.substring(i,t))):null},updateCookie:function(n,t,i,r){var o=this.getCookie(n),f=[],u,e;if(r=r||",",o){u=o.split(r);for(e in u)u.hasOwnProperty(e)&&u[e]!==t&&u[e]!==""&&(f[f.length]=u[e])}return i&&(f[f.length]=t),this.setCookie(n,f.join(r)),this},clearCookie:function(n){return this.setCookie(n,null,-1),this}};i(t).ready(function(){var t=n.$.Plato.Context;t.logger.logInfo("$.Plato.Options = "+JSON.stringify(t.options(),null,"     "));i.Plato.UI.init()})}(window,document,jQuery));