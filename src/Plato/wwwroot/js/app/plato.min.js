if(typeof jQuery=="undefined")throw new Error("Plato requires jQuery");$(function(n,t,i){"use strict";n.$.Plato={};n.$.Plato.Options={debug:!0,url:"",apiKey:"",csrfHeaderName:"X-Csrf-Token",csrfCookieName:"",BSToolTipEnabled:!0,BSToolTipSelector:"[data-toggle='tooltip']",MagnificSelector:"[data-toggle='dialog']",AvatarUploadSelector:"[data-upload='avatar']",getCsrfCookieToken:function(){if(this.csrfCookieName!==""){var i=n.$.Plato.Storage,t=i.getCookie(this.csrfCookieName);if(t)return t}return""}};n.$.Plato.Logger={info:"Info",warning:"Warning",error:"Error",prevLogDate:null,logInfo:function(n){this.log(this.info,n)},logWarning:function(n){this.log(this.warning,n)},logError:function(n){this.log(this.error,n)},log:function(n,t){if(i.Plato.Options.debug){var r=this.getDifferenceInMilliseconds();this.prevLogDate=new Date;console.log(n+": "+t+" - "+r+"ms elapsed since previous log entry.")}},getDifferenceInMilliseconds:function(){if(this.prevLogDate===null)this.prevLogDate=new Date;else return(this.prevLogDate-new Date)/1e4;return 0}};n.$.Plato.Context={options:function(){return typeof PlatoOptions!="undefined"&&i.extend(!0,i.Plato.Options,window.PlatoOptions),i.Plato.Options},logger:i.Plato.Logger};n.$.Plato.Locale={lang:"en-US"};n.$.Plato.UI={context:n.$.Plato.Context,init:function(){this.initToolTips();this.initDropDowns();this.initAvatar()},logInfo:function(n){this.context.logger.logInfo(n)},logError:function(n){this.context.logger.logError(n)},initToolTips:function(){this.logInfo("initToolTips()");this.context.options().BSToolTipEnabled&&(i(this.context.options().BSToolTipSelector).tooltip(),this.logInfo("Bootstratp tooltipss initialized."))},initDropDowns:function(){this.logInfo("initDropDowns()");i("ul.dropdown-menu [data-toggle='dropdown']").on("click",function(n){n.preventDefault();n.stopPropagation();i("ul.dropdown-menu [data-toggle='dropdown']").parent().removeClass("show");i(this).parent().addClass("show")})},initAvatar:function(){this.logInfo("initAvatar()");i(this.context.options().AvatarUploadSelector).change(function(){function n(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(t){var u=i(n).attr("data-upload-preview-selector"),r=i(u).find("span");r.css("background-image"," url("+t.target.result+")");r.hide().fadeIn(650)};t.readAsDataURL(n.files[0])}}n(this)})}};n.$.Plato.Http=function(t){var r=n.$.Plato.Context,u,f,e;if(!r)throw new Error("Plato.Http requires a valid Plato.Context object");if(u=r.options(),!u)throw new Error("Plato.Http requires a valid Plato.Options object");return t.url=u.url+t.url,f=u.apiKey,f?(r.logger.logInfo("ApiKey: "+f),t.beforeSend=function(n){n.setRequestHeader("Authorization","Basic "+f)}):r.logger.logInfo("No api key was supplied"),t.headers={"Content-Type":"application/json","X-Api-Version":"1","X-Csrf-Token":u.getCsrfCookieToken()},e=function(){var n=function(n,t,i,u){r&&r.logger.logInfo("$.Plato.Http - Error: "+JSON.stringify(t,null,"     ")+u)},t=function(n){r&&r.logger.logInfo("$.Plato.Http - Completed: "+JSON.stringify(n,null,"     "))};return{onError:function(n){n=n},onAlways:function(n){n=n},promise:function(r){return i.ajax(r).fail(function(t,i,u){n&&n(r,t,i,u)}).always(function(n,i){t&&t(n,i)})}}}(),r.logger.logInfo("$.Plato.Http - Starting Request: "+JSON.stringify(t,null,"     ")),e.promise(t)};n.$.Plato.Storage={setCookie:function(n,t,i,r,u){var e,f;return r=r||!1,r&&(t=encodeURIComponent(JSON.stringify(t))),u||(u="/"),e="",i&&(f=new Date,f.setTime(f.getTime()+864e5*i),e="; expires="+f.toGMTString()),document.cookie=n+"="+t+e+";path="+u,this},getCookie:function(n){var r=n+"=",u=document.cookie.indexOf(r),i,t;return u!==-1?(i=u+r.length,t=document.cookie.indexOf(";",i),t===-1&&(t=document.cookie.length),unescape(document.cookie.substring(i,t))):null},updateCookie:function(n,t,i,r){var o=this.getCookie(n),f=[],u,e;if(r=r||",",o){u=o.split(r);for(e in u)u.hasOwnProperty(e)&&u[e]!==t&&u[e]!==""&&(f[f.length]=u[e])}return i&&(f[f.length]=t),this.setCookie(n,f.join(r)),this},clearCookie:function(n){return this.setCookie(n,null,-1),this}};var r=function(){var n="scrollTo",r=n+"Id",u={event:"click",onBeforeComplete:function(){},onComplete:function(){}},t={init:function(n,i){if(i){this[i]?this[i].apply(this,[n]):alert(i+" is not a valid method!");return}t.bind(n)},bind:function(i){var r=i.data(n).event;if(r)i.on(r,function(n){n.preventDefault();t.scrollTo(i)})},scrollTo:function(t){var u,r;if(jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeInOutExpo:function(n,t,i,r,u){return t===0?i:t===u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(-Math.pow(2,-10*--t)+2)+i}}),u=t.attr("href"),u&&(r=i(u),r.length>0)){i("html, body").stop().animate({scrollTop:r.offset().top-10},250,"easeInOutExpo",function(){t.data(n).onComplete(t,r)});t.data(n).onBeforeComplete(t,r)}}};return{init:function(){for(var o,h,e={},f=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(e,o);break;case String:f=o}}if(this.length>0)return this.each(function(){if(i(this).data(r))i(this).data(n,i.extend({},i(this).data(n),e));else{var o=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(r,o);i(this).data(n,i.extend({},u,e))}t.init(i(this),f)});f&&(t[f]?(h=i("body"),h.data(n,i.extend({},u,e)),t[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}(),u=function(){var n="selectDropdown",r=n+"Id",u={event:"click",onBeforeComplete:function(){},onComplete:function(){}},t={preview:{template:'<li class="list-group-item">{text}<\/li>',empty:function(n){var i=t.getDropdownPreviewText(n),r=t.preview.template;return r.replace("{text}",i)}},init:function(n,i){if(i){this[i]?this[i].apply(this,[n]):alert(i+" is not a valid method!");return}t.bind(n)},bind:function(n){var t=this,r,u;if(n.hasClass("dropdown")){r=this.getDropdownMenu(n);u=this.getDropdownSearchInput(n);n.on("shown.bs.dropdown",function(){u.focus()});u.on("keyup",function(){t.filterItems(n)});r.on("change",'input[type="checkbox"], input[type="radio"]',function(){var e=t.getDropdownPreview(n),s=t.getDropdownLabels(n),u,f,o;if(s.each(function(){i(this).removeClass("active");var n=i(this).attr("data-collapse-target"),t=i(n);t.addClass("hidden")}),e.empty(),u=[],i(r).find("input:checked").each(function(){var n=i(this).next(),t=n.attr("data-collapse-target"),r=i(t);r.addClass("show");n.addClass("active");u.push(n)}),u.length===0)e.empty().html(t.preview.empty(n));else{for(f="",o=0;o<u.length;o++)f+='<div class="list-group-item">',f+=i(u[o]).html(),f+="<\/div>";e.html(f);e.show()}});r.on("click",".dropdown-item",function(n){n.stopPropagation()})}},filterItems:function(n){var u=this.getDropdownLabels(n),h=this.getDropdownSearchInput(n),f=this.getDropdownSearchNoResults(n),e=h.val().trim(),o=u.length,s=0,r,t;for(e.length===0&&i(u.show()),r=0;r<o;r++)t=i(u[r]),t.length>0&&t.data("value")&&(t.data("value").toLowerCase().startsWith(e)?t.show():(t.hide(),s++));s===o?f.show():f.hide()},getDropdownButton:function(n){return n.find('[data-toggle="dropdown"]')},getDropdownMenu:function(n){return n.find(".dropdown-menu")},getDropdownLabels:function(n){var t=this.getDropdownMenu(n);return t.find("label")},getDropdownSearchInput:function(n){var t=this.getDropdownMenu(n);return t.find('[type="search"]')},getDropdownSearchNoResults:function(n){return n.find(".empty")},getDropdownPreview:function(n){var t=n.find(".select-dropdown-preview");if(t.length===0&&(t=n.next(),!t.hasClass("select-dropdown-preview")))throw new Error("A preview area coulod not be found for the select dropdown.");return t},getDropdownPreviewText:function(n){var t=this.getDropdownPreview(n);return t.length>0?t.attr("data-empty-preview-text"):"No selection"}};return{init:function(){for(var o,h,e={},f=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(e,o);break;case String:f=o}}if(this.length>0)return this.each(function(){if(i(this).data(r))i(this).data(n,i.extend({},i(this).data(n),e));else{var o=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(r,o);i(this).data(n,i.extend({},u,e))}t.init(i(this),f)});f&&(t[f]?(h=i("body"),h.data(n,i.extend({},u,e)),t[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}(),f=function(){var n="treeView",r=n+"Id",u={event:"click",toggleSelector:'[data-toggle="tree"]',onBeforeComplete:function(){},onComplete:function(){}},t={init:function(n,i){if(i){this[i]?this[i].apply(this,[n]):alert(i+" is not a valid method!");return}t.bind(n)},bind:function(r){var f=r.data(n).toggleSelector,u=r.data(n).event;i(f).unbind(u).bind(u,function(){t.toggleNode(r,i(this).attr("data-node-id"))})},toggleNode:function(n,i){var u=t.getNodeToggler(n,i),f=t.getNodeListItem(n,i),r=f.find("ul").first();console.log(r.length);r.is(":visible")?(r.slideUp("fast"),u.removeClass("fa-chevron-down").addClass("fa-chevron-right")):(r.slideDown("fast"),u.removeClass("fa-chevron-right").addClass("fa-chevron-down"))},getNodeListItem:function(n,t){return n.find("#"+t)},getNodeToggler:function(n,t){return n.find('[data-node-id="'+t+'"]')}};return{init:function(){for(var o,h,e={},f=null,s=0;s<arguments.length;++s){o=arguments[s];switch(o.constructor){case Object:i.extend(e,o);break;case String:f=o}}if(this.length>0)return this.each(function(){if(i(this).data(r))i(this).data(n,i.extend({},i(this).data(n),e));else{var o=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(r,o);i(this).data(n,i.extend({},u,e))}t.init(i(this),f)});f&&(t[f]?(h=i("body"),h.data(n,i.extend({},u,e)),t[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}();i.fn.extend({scrollTo:r.init,selectDropdown:u.init,treeView:f.init});i(t).ready(function(){var t=n.$.Plato.Context;t.logger.logInfo("$.Plato.Options = "+JSON.stringify(t.options(),null,"     "));i.Plato.UI.init();i('[data-provide="scroll"]').scrollTo();i('[data-provide="select-dropdown"]').selectDropdown();i('[data-provide="tree"]').treeView()})}(window,document,jQuery));