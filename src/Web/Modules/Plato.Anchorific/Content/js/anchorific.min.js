if(typeof jQuery=="undefined")throw new Error("jQuery 3.3.1 or above Required");if(typeof window.$.Plato=="undefined")throw new Error("$.Plato Required");(function(n,t,i,r){"use strict";var f=function(){var i="anchorific",u=i+"Id",f={navigation:".anchorific",headers:"h1, h2, h3, h4, h5, h6",anchorClass:"anchor text-muted",anchorTitle:null,iconCss:"fal fa-link",spy:!0,position:"append",spyOffset:n().layout("getHeaderHeight")||!0,onClick:function(){},emptyText:"No sections found!"},e={init:function(n,t,i){if(t)return this[t]!==null&&typeof this[t]!="undefined"?this[t].apply(this,[n,i]):(alert(t+" is not a valid method!"),null);this.bind(n)},bind:function(n){this.headers=n.find(n.data(i).headers);this.build(n);n.data(i).spy&&this.spy(n)},build:function(t){var r=this,e=t.data(i).navigation,u=n(e),f;for(u.data(i,{first:0,previous:0}),r.headers.length!==0&&(u.data(i).first=parseInt(r.headers.prop("nodeName").substring(1),null)),u.length>0&&u.each(function(){if(r.headers.length>0){n(this).empty().append("<ul />");n(this).data(i).previous=n(this).find("ul").last();for(var u=0;u<r.headers.length;u++)r.navigations(t,r.headers.eq(u))}else n(this).empty().text(t.data(i).emptyText)}),f=0;f<r.headers.length;f++)r.anchor(t,r.headers.eq(f))},navigations:function(t,u){var e=this,o,s,f,h=e.name(u);u.attr("id")!==r&&(h=u.attr("id"));o=n("<a />").attr("href","#"+h).text(u.text());o.click(function(r){r.preventDefault();r.stopPropagation();var f=n(this).attr("href"),u=t.find(f);if(u.length>0&&(n().scrollTo({offset:-t.data(i).spyOffset,target:u,onComplete:function(){}},"go"),t.data(i).onClick))t.data(i).onClick(t,u,n(this))});s=n("<li />").append(o);f=parseInt(u.prop("nodeName").substring(1),null);s.attr("data-tag",f);e.subheadings(t,f,s);e.first=f},subheadings:function(t,r,u){var o=this,f=t.data(i).navigation,e=n(f);e.each(function(){var t=n(this).find("ul"),f=n(this).find("li");r===n(this).data(i).first?n(this).data(i).previous.append(u):r>n(this).data(i).first?(f.last().append("<ul />"),t.last().append(u),n(this).data(i).previous=u.parent()):(t.find("li[data-tag="+r+"]").last().parent().append(u),n(this).data(i).previous=u.parent())})},name:function(n){return n.text().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-").toLowerCase()},anchor:function(t,u){var s=this.name(u),f,h=t.data(i).iconCss,e=t.data(i).anchorTitle,c=t.data(i).anchorClass,o;u.attr("id")===r&&u.attr("id",s);o=u.attr("id");f=n("<a />",{href:"#"+o,"class":c}).append(n("<i />").addClass(h));e&&f.attr("title",e);f.click(function(r){r.preventDefault();r.stopPropagation();var f=n(this).attr("href"),u=t.find(f);if(u.length>0&&(n().scrollTo({offset:-t.data(i).spyOffset,target:u},"go"),t.data(i).onClick))t.data(i).onClick(t,u,n(this))});t.data(i).position==="append"?u.append(f):u.prepend(f)},spy:function(u){var c=this,f,e,o,s=u.data(i).spyOffset,h=function(){f=c.headers.map(function(){if(n(this).offset().top-s-n(t).scrollTop()<s)return this});f=n(f).eq(f.length-1);f&&f.length&&(e=n('li:has(a[href="#'+f.attr("id")+'"])'),o!==r&&o.removeClass("active"),e.addClass("active"),o=e)};h();n(t).scroll(function(){h()})}};return{init:function(){for(var o,t,l,r={},s=null,h=null,c=0;c<arguments.length;++c){o=arguments[c];switch(o.constructor){case Object:n.extend(r,o);break;case String:s=o;break;case Function:h=o}}return this.length>0?this.each(function(){if(n(this).data(u))n(this).data(i,n.extend({},n(this).data(i),r));else{var t=i+parseInt(Math.random()*100)+(new Date).getTime();n(this).data(u,t);n(this).data(i,n.extend({},f,r))}return e.init(n(this),s,h)}):(t=n(".entity-body"),t.length>0)?(t.data(u)?t.data(i,n.extend({},t.data(i),r)):(l=i+parseInt(Math.random()*100)+(new Date).getTime(),t.data(u,l),t.data(i,n.extend({},f,r))),e.init(t,s,h)):void 0}}}(),u;n.fn.extend({anchorific:f.init});u=t.$.Plato;u.ready(function(){var o=n(".entity-body"),r=null,e={anchorTitle:u.T("Link to this section"),emptyText:u.T("No sections found"),onClick:function(n,t){r=t}},f;o.anchorific(e);f=function(){if(r){var f="",e=n('link[rel="canonical"]'),u=e.length>0?e.attr("href"):t.location.href.split("#")[0];r.attr("id")&&(f="#"+r.attr("id"));u&&u!==""&&t.history.replaceState(t.history.state||{},i.title,u+f);r=null}};n('[data-provide="infiniteScroll"]').length>0?n().infiniteScroll&&n().infiniteScroll("scrollEnd",function(){f()}):n().scrollSpy({onScrollEnd:function(){f()}});n().markdown&&n().markdown("preview",function(n){n.anchorific(e)})})})(jQuery,window,document);