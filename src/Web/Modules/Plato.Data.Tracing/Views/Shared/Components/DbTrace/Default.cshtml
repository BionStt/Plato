@model TraceViewModel

<h4>@T["Tracing"]</h4>
<p class="text-muted">
    @T["You can see below all database queries required to construct this page."]
</p>
<hr />

<table class="table">
    @if (Model.Traces != null)
    {
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Type</th>
                <th scope="col">Command</th>
                <th scope="col">Start</th>
                <th scope="col">End</th>
                <th scope="col">Total (ms)</th>
                <th scope="col">Params</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var trace in Model.Traces)
            {
            <tr>
                <th scope="row">@trace.Id.ToString()</th>
                <td>@trace.Command.CommandType.ToString()</td>
                <td>@trace.Command.CommandText</td>
                <td>@trace.StartTime.ToString()</td>
                <td>@trace.EndTime.ToString()</td>
                <td>@string.Format("{0}ms", trace.ElapsedTime.Milliseconds)</td>
                <td>
                    @if  (trace.Command.Parameters != null)
                    {
                        foreach (var parameter in trace.Command.Parameters)
                        {
                            @Html.Raw(string.Format("<strong>{0}</strong> = {1}<hr/>", parameter.ParameterName, parameter.Value.ToString()));                        
                        }
                    } else
                    {
                        @T["No parameters"]
                    }
                </td>
            </tr>
            }
        </tbody>
    }
    else
    {
        <tbody>
            <tr>
                <td>
                    @T["No queries executed"]
                </td>
            </tr>
        </tbody>
    }
</table>

<hr />