if(typeof jQuery=="undefined")throw new Error("jQuery 3.3.1 or above Required");if(typeof window.$.Plato=="undefined")throw new Error("$.Plato Required");if(typeof window.$.fn.platoUI=="undefined")throw new Error("$.Plato UI Required");$(function(n,t,i){"use strict";var r=n.$.Plato,u=function(){var n="references",u=n+"Id",t={},r={init:function(n,t,i){if(t){this[t]?this[t].apply(this,[n,i]):alert(t+" is not a valid method!");return}this.bind(n)},bind:function(r){var u="#";r.suggester(i.extend(r.data(n)),{keys:[{match:/(^|\s|\()(#{1}([a-z0-9\-_/]*))$/i,search:function(n,t){for(var r=n.val().split(""),e=null,f=-1,s=t.start-1,o,i=s;i>=0;i--)if(r[i]===u){f=i;break}else if(r[i]==="\n"||r[i]===" ")break;if(o=f>0?r[f-1]:"",console.log(o),o===u&&(f=-1,e=null),f>=0)for(e="",i=f;i<=r.length-1;i++){if(r[i]==="\n"||r[i]===" ")break;e+=r[i]}return{startIndex:f,value:e}},bind:function(n,t){var i=t.value;i&&(i.substring(0,1)===u&&(i=i.substring(1,i.length)),r.suggester({page:1,pageSize:5,itemSelection:{enable:!0,index:0,css:"active"},valueField:"keywords",config:{method:"GET",url:"api/search/get?page={page}&size={pageSize}&keywords="+encodeURIComponent(i),data:{sort:"ModifiedDate",order:"Desc"}},itemCss:"dropdown-item",itemTemplate:'<a class="{itemCss}" href="{url}"><div style="display:inline-block; width: 85%; overflow:hidden; text-overflow: ellipsis;"><span class="avatar avatar-sm mr-2"><span style="background-image: url({createdBy.avatar.url});"><\/span><\/span>{title}<\/div>{relevance}<\/a>',parseItemTemplate:function(n,t){return n=t.id?n.replace(/\{id}/g,t.id):n.replace(/\{id}/g,"0"),n=t.title?n.replace(/\{title}/g,t.title):n.replace(/\{title}/g,"(no title)"),n=t.excerpt?n.replace(/\{excerpt}/g,t.userName):n.replace(/\{excerpt}/g,"(no excerpt)"),n=t.url?n.replace(/\{url}/g,t.url):n.replace(/\{url}/g,"#"),n=t.relevance?t.relevance>0?n.replace(/\{relevance}/g,'<span class="float-right badge badge-primary" data-provide="tooltip" title="Relevancy">'+t.relevance+"%<\/span>"):n.replace(/\{relevance}/g,""):n.replace(/\{relevance}/g,""),t.createdBy&&t.createdBy.avatar&&(n=t.createdBy.avatar.url?n.replace(/\{createdBy.avatar.url}/g,t.createdBy.avatar.url):n.replace(/\{createdBy.avatar.url}/g,"#")),t.modifiedBy&&t.modifiedBy.avatar&&(n=t.modifiedBy.avatar.url?n.replace(/\{modifiedBy.avatar.url}/g,t.modifiedBy.avatar.url):n.replace(/\{modifiedBy.avatar.url}/g,"#")),t.lastReplyBy&&t.lastReplyBy.avatar&&(n=t.lastReplyBy.avatar.url?n.replace(/\{lastReplyBy.avatar.url}/g,t.lastReplyBy.avatar.url):n.replace(/\{lastReplyBy.avatar.url}/g,"#")),n},onPagerClick:function(n,t,i){i.preventDefault();i.stopPropagation();r.suggester({page:t},"show")},onItemClick:function(n,i,u){u.preventDefault();r.focus().suggester("hide").suggester({insertData:{index:t.startIndex,value:i.id+"("+i.title+")"}},"insert")}},"show"))},unbind:function(){r.suggester("hide")}}]},t)}};return{init:function(){for(var e,h,o={},f=null,c=null,s=0;s<arguments.length;++s)if(e=arguments[s],e)switch(e.constructor){case Object:i.extend(o,e);break;case String:f=e;break;case Function:c=e}if(this.length>0)return this.each(function(){if(i(this).data(u))i(this).data(n,i.extend({},i(this).data(n),o));else{var e=n+parseInt(Math.random()*100)+(new Date).getTime();i(this).data(u,e);i(this).data(n,i.extend({},t,o))}r.init(i(this),f,c)});f&&(r[f]?(h=i("body"),h.data(n,i.extend({},t,o)),r[f].apply(this,[h])):alert(f+" is not a valid method!"))}}}();i.fn.extend({references:u.init});r.ready(function(){i('[data-provide="references"]').references();i(".md-textarea").references();i(".md-textarea").keyBinder("bind")})}(window,document,jQuery));